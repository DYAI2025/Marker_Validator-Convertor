{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.org/schemas/score/v1.0",
  "title": "Score Schema",
  "description": "Schema for SCR_ files",
  "type": "object",
  "required": ["id", "target_markers", "window", "aggregation"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^SCR_[A-Z0-9_]+$",
      "description": "Score ID with required SCR_ prefix"
    },
    "description": {
      "type": "string",
      "description": "Description of the score profile"
    },
    "target_markers": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^(A|S|C|MM)_[A-Z0-9_]+$"
      },
      "minItems": 1,
      "description": "List of target marker IDs"
    },
    "window": {
      "type": "object",
      "properties": {
        "messages": { "type": "integer" },
        "seconds": { "type": "integer" }
      },
      "description": "Window configuration"
    },
    "aggregation": {
      "type": "string",
      "enum": ["sum", "mean", "max", "min", "count"],
      "description": "Aggregation method"
    },
    "weight": {
      "type": "number",
      "default": 1.0,
      "description": "Weight factor"
    },
    "decay": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "default": 0.0,
      "description": "Decay factor"
    }
  },
  "additionalProperties": true
} 